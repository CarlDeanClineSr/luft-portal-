name: IMPERIAL DAILY PULSE (Strict 24h)

# 1. TRIGGER SETTINGS
# We REMOVED "on: push".
# This prevents the "Cancel" loop when you save files.
on:
  schedule:
    - cron: '0 0 * * *'  # Runs at Midnight UTC
  workflow_dispatch:      # Allows Manual Button Click

permissions:
  contents: write

jobs:
  imperial-daily-sync:
    runs-on: ubuntu-latest
    
    steps:
    - name: Access Data Vault
      uses: actions/checkout@v4

    # 2. RUN THE SCRIPTS (Once a day)
    - name: Execute Daily Data Ingest
      run: |
        echo "IMPERIAL PROTOCOL: DAILY SYNC INITIATED"
        # Add scripts here if needed.
    
    # 3. COMMIT DATA (Once a day)
    - name: Commit Daily Data
      run: |
        git config --local user.email "director@imperialphysicsobservatory.org"
        git config --local user.name "Imperial Engine"
        git add .
        # If no changes, this exits quietly without error
        git commit -m "IMPERIAL DAILY SYNC: $(date -u)" || echo "No new data today"
        git push

